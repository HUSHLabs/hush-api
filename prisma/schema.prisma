generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Verification {
  id               String   @id @default(uuid())
  clientId         String
  contractAddress  String
  threshold        Decimal
  statement        String
  callbackUrls     String[]
  client           Client   @relation(fields: [clientId], references: [id])
  proofs           Proof[]
  slug             String
  name             String   @default("New Verification")
  shortDescription String   @default("Short description")
  description      String   @default("Long description")
  imageUrl         String   @default("https://image")
}

model Client {
  id            String         @id @default(uuid())
  name          String
  email         String
  logoUrl       String
  clientSecret  String
  verifications Verification[]
}

model Proof {
  id             String       @id @default(uuid())
  verificationId String
  blockNumber    Int
  verification   Verification @relation(fields: [verificationId], references: [id])
  statement      String
  proof          String
  publicInput    String
  threshold      Decimal
  addresses      String[]
}

model Account {
  address         String  @id
  balance         Decimal
  blockNumber     Int
  contractAddress String
}

model BlockchainSyncState {
  entity              String @id
  earliestBlockHash   String
  contractAddress     String
  lastSeenBlockNumber Int
}
